!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).pubsubLib={})}(this,(function(e){"use strict";class t{events=new Map;onceEvents=new Map;static instance=null;static getInstance(){return t.instance||(t.instance=new t),t.instance}on(e,t){this.events.has(e)||this.events.set(e,[]),this.events.get(e).push(t)}off(e,t){const n=this.events.get(e);n?.length&&n.splice(0,n.length,...n.filter((e=>e!==t)));const s=this.onceEvents.get(e);s?.length&&s.splice(0,s.length,...s.filter((e=>e!==t)))}once(e,t){this.onceEvents.has(e)||this.onceEvents.set(e,[]),this.onceEvents.get(e).push(t)}emit(e,...t){Promise.resolve().then((()=>{const n=this.events.get(e)||[],s=this.onceEvents.get(e)||[],i=[...n,...s];if(i.length)for(let e=0,n=i.length;e<n;e++)i[e].apply(this,t);s.length&&s.splice(0)}))}clear(){this.events.clear(),this.onceEvents.clear()}}e.PubSub=t}));
